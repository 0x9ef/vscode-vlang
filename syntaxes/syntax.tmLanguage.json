{
	"name": "v",
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"fileTypes": [
		".v", ".vh"
	],
	"scopeName": "source.v",
	"patterns": [
		{
			"begin": "^\\s*(module)\\s+",
			"beginCaptures": {
				"1": {
					"name": "keyword.module.v"
				}
			},
			"end": "([0-9a-zA-Z_]*)",
			"endCaptures": {
				"1": {
					"name": "entity.name.module.v"
				}
			}
		},
		{
			"begin": "^\\s*(import)\\s+",
			"beginCaptures": {
				"1": {
					"name": "keyword.import.v"
				}
			},
			"end": "([0-9a-zA-Z_.]*)",
			"endCaptures": {
				"1": {
					"name": "entity.name.import.v"
				}
			}
		},
		{
			"begin": "^\\s*(#include)\\s+",
			"beginCaptures": {
				"1": {
					"name": "keyword.include.v"
				}
			},
			"end": "(\\<)\\s*([0-9a-zA-Z_\\\\.\/]*)(\\>)",
			"endCaptures": {
				"1": {
					"name": "string.quoted.double.v"
				},
				"2": {
					"name": "string.quoted.double.v"
				},
				"3": {
					"name": "string.quoted.double.v"
				}
			}
		},
		{
			"match": "^\\s*(#flag)\\s+(.*)?",
			"captures": {
				"1": {
					"name": "keyword.flag.v"
				},
				"2": {
					"name": "string.quoted.double.v"
				}
			}
		},
		{
			"include": "#comments"
		},
		{
			"include": "#generic"
		},
		{
			"include": "#operator"
		},
		{
			"include": "#function-new"
		},
		{
			"include": "#function-exist"
		},
		{
			"comment": "Currently Unavaliable",
			"include": "#discard-go"
		},
		{
			"include": "#type"
		},
		{
			"include": "#enum"
		},
		{
			"include": "#struct"
		},
		{
			"include": "#interface"
		},
		{
			"include": "#punctuation"
		},
		{
			"include": "#constants"
		},
		{
			"include": "#variable-assignment"
		},
		{
			"comment": "Currently Unavaliable",
			"include": "#variable-increment"
		},
		{
			"comment": "Currently Unavaliable",
			"include": "#variable-decrement"
		},
		{
			"include": "#keyword"
		},
		{
			"include": "#storage"
		},
		{
			"include": "#std-type"
		},
		{
			"include": "#std-cbased-type"
		},
		{
			"include": "#number"
		},
		{
			"include": "#singlestring"
		},
		{
			"include": "#doublestring"
		}
	],
	"repository": {
		"line-continuation-character": {
			"patterns": [
				{
					"match": "(\\\\)\\n",
					"captures": {
						"1": {
							"name": "constant.character.escape.line-continuation.v"
						}
					}
				}
			]
		},
		"comments": {
			"patterns": [
				{
					"begin": "/\\*",
					"end": "\\*/",
					"captures": {
						"0": {
							"name": "punctuation.other.comment.v"
						}
					},
					"name": "comment.block.v"
				},
				{
					"begin": "//",
					"beginCaptures": {
						"0": {
							"name": "punctuation.other.comment.v"
						}
					},
					"end": "$",
					"name": "comment.line.double-slash.v"
				}
			]
		},
		"constants": {
			"patterns": [
				{
					"name": "constant.language.v",
					"match": "\\b(true|false)\\b"
				}
			]
		},
		"dot": {
			"match": "\\.",
			"name": "punctuation.other.dot.v"
		},
		"comma": {
			"match": "\\,",
			"name": "punctuation.other.comma.v"
		},
		"colon": {
			"match": "\\:",
			"name": "punctuation.other.colon.v"
		},
		"semicolon": {
			"match": "\\;",
			"name": "punctuation.other.semicolon.v"
		},
		"question": {
			"match": "\\?",
			"name": "punctuation.other.questionmark.v"
		},
		"parent": {
			"patterns": [
				{
					"name": "punctuation.other.parent.begin.v",
					"match": "\\("
				},
				{
					"name": "punctuation.other.parent.end.v",
					"match": "\\)"
				}
			]
		},
		"angle-bracket": {
			"patterns": [
				{
					"comment": "Only for generics",
					"match": "\\<",
					"name": "punctuation.other.anglebracket.begin.v"
				},
				{
					"comment": "Only for generics",
					"match": "\\>",
					"name": "punctuation.other.anglebracket.end.v"
				}
			]
		},
		"square-bracket": {
			"patterns": [
				{
					"name": "punctuation.other.squarebracket.begin.v",
					"match": "\\["
				},
				{
					"name": "punctuation.other.squarebracket.end.v",
					"match": "\\]"
				}
			]
		},
		"curly-bracket": {
			"patterns": [
				{
					"name": "punctuation.other.curlybracket.begin.v",
					"match": "\\{"
				},
				{
					"name": "punctuation.other.curlybracket.end.v",
					"match": "\\}"
				}
			]
		},
		"punctuation": {
			"patterns": [
				{
					"include": "#dot"
				},
				{
					"include": "#comma"
				},
				{
					"include": "#parent"
				},
				{
					"include": "#square-bracket"
				},
				{
					"include": "#curly-bracket"
				},
				{
					"include": "#colon"
				},
				{
					"include": "#semicolon"
				},
				{
					"include": "#question"
				}
			]
		},
		"generic": {
			"patterns": [
				{
					"match": "(\\<)([0-9a-zA-Z_]+)(\\>)",
					"captures": {
						"1": {
							"name": "punctuation.other.anglebracket.begin.v"
						},
						"2": {
							"patterns": [
								{
									"match": "\\d\\w+",
									"name": "invalid.illegal.v"
								},
								{
									"match": "\\w*",
									"name": "entity.name.generic.v"
								}
							]
						},
						"3": {
							"name": "punctuation.other.anglebracket.end.v"
						}
					}
				}
			]
		},
		"variable-assignment": {
			"patterns": [
				{
					"match": "([0-9a-zA-Z_]+)\\s*(:=)\\s*(.+?)(?=(?:(?:\/\/|\/\\*).*)?$)",
					"captures": {
						"1": {
							"name": "variable.other.assignment.v"
						},
						"2": {
							"name": "keyword.operator.assignment.v"
						},
						"3": {
							"patterns": [
								{
									"include": "#generic"
								},
								{
									"include": "#std-type"
								},
								{
									"include": "#std-cbased-type"
								},
								{
									"include": "#punctuation"
								},
								{
									"include": "#function-exist"
								},
								{
									"include": "#singlestring"
								},
								{
									"include": "#doublestring"
								},
								{
									"include": "#number"
								}
							]
						}
					}
				}
			]
		},
		"variable-increment": {
			"patterns": [
				{
					"match": "([0-9a-zA-Z_]+)(\\+\\+)(?=)",
					"captures": {
						"1": {
							"name": "variable.other.increment.v"
						},
						"2": {
							"name": "keyword.operator.increment.v"
						}
					}
				}
			]
		},
		"variable-decrement": {
			"patterns": [
				{
					"match": "([0-9a-zA-Z_]+)(\\-\\-)(?=)",
					"captures": {
						"1": {
							"name": "variable.other.decrement.v"
						},
						"2": {
							"name": "keyword.operator.decrement.v"
						}
					}
				}
			]
		},
		"function-new": {
			"patterns": [
				{
					"begin": "^\\s*(\\bfn\\b)\\s+([0-9a-zA-Z_]+)(\\()",
					"beginCaptures": {
						"1": {
							"name": "keyword.function.v"
						},
						"2": {
							"patterns": [
								{
									"match": "\\d\\w+",
									"name": "invalid.illegal.v"
								},
								{
									"match": "\\w*",
									"name": "entity.name.function.v"
								}
							]
						},
						"3": {
							"name": "punctuation.other.parent.begin.v"
						}
					},
					"end": "([\\s\\w\\,\\.\\:\\<\\>\\[\\]\\(\\)\\?]*)(\\))",
					"endCaptures": {
						"1": {
							"patterns": [
								{
									"include": "#dot"
								},
								{
									"include": "#comma"
								},
								{
									"include": "#colon"
								},
								{
									"include": "#question"
								},
								{
									"include": "#generic"
								},
								{
									"include": "#parent"
								},
								{
									"include": "#square-bracket"
								},
								{
									"include": "#std-type"
								},
								{
									"include": "#std-cbased-type"
								}
							]
						},
						"2": {
							"name": "punctuation.other.parent.end.v"
						}
					}
				}
			]
		},
		"function-exist": {
			"patterns": [
				{
					"match": "([0-9a-zA-Z_]+)(\\()([\\W\\S]*)(\\))",
					"captures": {
						"1": {
							"patterns": [
								{
									"match": "\\d\\w+",
									"name": "invalid.illegal.v"
								},
								{
									"match": "\\w*",
									"name": "support.function.v"
								}
							]
						},
						"2": {
							"name": "punctuation.other.parent.begin.v"
						},
						"3": {
							"patterns": [
								{
									"include": "#dot"
								},
								{
									"include": "#comma"
								},
								{
									"include": "#colon"
								},
								{
									"include": "#question"
								},
								{
									"include": "#parent"
								},
								{
									"include": "#generic"
								},
								{
									"include": "#square-bracket"
								},
								{
									"include": "#std-type"
								},
								{
									"include": "#std-cbased-type"
								},
								{
									"include": "#singlestring"
								},
								{
									"include": "#doublestring"
								},
								{
									"include": "#number"
								}
							]
						},
						"4": {
							"name": "punctuation.other.parent.end.v"
						}
					}
				}
			]
		},
		"label": {
			"comment": "Current unavaliable",
			"patterns": [
				{
					"match": "^\\s*(default)([0-9a-zA-Z_]+)(:)",
					"captures": {
						"1": {
							"patterns": [
								{
									"name": "invalid.illegal.v",
									"match": "\\d\\w+"
								},
								{
									"name": "entity.name.label.v",
									"match": "\\w*"
								}
							]
						},
						"2": {
							"patterns": [
								{
									"name": "entity.name.label.v",
									"match": "\\w*"
								}
							]
						},
						"3": {
							"name": "punctuation.other.colon.v"
						}
					}
				},
				{
					"match": "^\\s*(\\bgoto\\b)\\s+([0-9a-zA-Z_]+)",
					"captures": {
						"1": {
							"name": "keyword.control.v"
						},
						"2": {
							"patterns": [
								{
									"name": "invalid.illegal.v",
									"match": "\\d\\w+"
								},
								{
									"name": "entity.name.label.v",
									"match": "\\w*"
								}
							]
						}
					}
				}
			]
		},
		"type": {
			"patterns": [
				{
					"comment": "Type definition",
					"match": "^\\s*(\\btype\\b)\\s+([0-9a-zA-Z_.]*)\\s*([0-9a-zA-Z_.]*)",
					"captures": {
						"1": {
							"name": "keyword.type.v"
						},
						"2": {
							"patterns": [
								{
									"name": "invalid.illegal.v",
									"match": "\\d\\w+"
								},
								{
									"name": "entity.name.type.v",
									"match": "\\w*"
								}
							]
						},
						"3": {
							"patterns": [
								{
									"name": "invalid.illegal.v",
									"match": "\\d\\w+"
								},
								{
									"name": "entity.name.type.v",
									"match": "\\w*"
								}
							]
						}
					}
				}
			]
		},
		"enum": {
			"patterns": [
				{
					"comment": "Enumeration",
					"match": "^\\s*(\\benum\\b)\\s+([0-9a-zA-Z_.]*)",
					"captures": {
						"1": {
							"name": "keyword.enum.v"
						},
						"2": {
							"patterns": [
								{
									"name": "invalid.illegal.v",
									"match": "\\d\\w+"
								},
								{
									"name": "entity.name.enum.v",
									"match": "\\w*"
								}
							]
						}
					}
				}
			]
		},
		"struct": {
			"patterns": [
				{
					"comment": "Structure",
					"match": "^\\s*(\\bstruct\\b)\\s+([0-9a-zA-Z_.]*)",
					"captures": {
						"1": {
							"name": "keyword.struct.v"
						},
						"2": {
							"patterns": [
								{
									"name": "invalid.illegal.v",
									"match": "\\d\\w+"
								},
								{
									"name": "entity.name.struct.v",
									"match": "\\w*"
								}
							]
						}
					}
				}
			]
		},
		"interface": {
			"patterns": [
				{
					"comment": "Interface",
					"match": "^\\s*(\\binterface\\b)\\s+([0-9a-zA-Z_.]*)",
					"captures": {
						"1": {
							"name": "keyword.interface.v"
						},
						"2": {
							"patterns": [
								{
									"name": "invalid.illegal.v",
									"match": "\\d\\w+"
								},
								{
									"name": "entity.name.interface.v",
									"match": "\\w*"
								}
							]
						}
					}
				}
			]
		},
		"std-type": {
			"patterns": [
				{
					"name": "storage.type.boolean.v",
					"match": "\\bbool\\b"
				},
				{
					"name": "storage.type.byte.v",
					"match": "\\bbyte\\b"
				},
				{
					"name": "storage.type.byteptr.v",
					"match": "\\bbyteptr\\b"
				},
				{
					"name": "storage.type.voidptr.v",
					"match": "\\bvoidptr\\b"
				},
				{
					"name": "storage.type.string.v",
					"match": "\\bstring\\b"
				},
				{
					"name": "storage.type.rune.v",
					"match": "\\brune\\b"
				},
				{
					"name": "storage.type.numeric.v",
					"match": "\\b(int|uint|i8|i16|i32|i64|u8|u16|u32|u64|f32|f64)\\b"
				}
			]
		},
		"std-cbased-type": {
			"patterns": [
				{
					"name": "storage.type.numeric.cbased.v",
					"match": "\\b(size_t|ptrdiff_t)\\b"
				}
			]
		},
		"operator": {
			"patterns": [
				{
					"comment": "Arithmethic operators",
					"name": "keyword.operator.arithmethic.v",
					"match": "(\\+|\\-|\\*|\\/|\\%|\\+\\+|\\-\\-)"
				},
				{
					"comment": "Relation operators",
					"name": "keyword.operator.relation.v",
					"match": "(\\=\\=|\\!\\=|\\>|\\<|\\>\\=|\\<\\=)"
				},
				{
					"comment": "Logical operators",
					"name": "keyword.operator.logical.v",
					"match": "(\\&\\&|\\|\\||\\!)"
				},
				{
					"comment": "Bitwise operators",
					"name": "keyword.operator.bitwise.v",
					"match": "(\\&|\\||\\^|\\<\\<|\\>\\>)"
				},
				{
					"comment": "Assignment  operators",
					"name": "keyword.operator.assignment.v",
					"match": "(\\:\\=|\\=|\\+\\=|\\-\\=|\\*\\=|\\/\\=|\\%\\=|\\&\\=|\\|\\=|\\^\\=|\\&\\&\\=|\\|\\|\\=|\\>\\>\\=|\\<\\<\\=)"
				}
			]
		},
		"keyword": {
			"patterns": [
				{
					"comment": "Keyword Control",
					"name": "keyword.control.v",
					"match": "\\b(in|or|break|continue|switch|case|default|match|if|else|for|go|goto|defer|return)\\b"
				},
				{
					"comment": "Keyword Control Specific",
					"name": "keyword.control.v",
					"match": "(\\$if)"
				},
				{
					"comment": "Keyword Type",
					"name": "keyword.type.v",
					"match": "\\btype\\b"
				},
				{
					"comment": "Keyword Based Enumeration",
					"name": "keyword.enum.v",
					"match": "\\benum\\b"
				},
				{
					"comment": "Keyword Based Structure",
					"name": "keyword.struct.v",
					"match": "\\bstruct\\b"
				},
				{
					"comment": "Keyword Based Interface",
					"name": "keyword.interface.v",
					"match": "\\binterface\\b"
				},
				{
					"comment": "Keyword Extended Map",
					"name": "keyword.map.v",
					"match": "\\bmap\\b"
				},
				{
					"comment": "Keyword Extended Assert",
					"name": "keyword.assert.v",
					"match": "\\bassert\\b"
				},
				{
					"comment": "Keyword Extended Sizeof",
					"name": "keyword.sizeof.v",
					"match": "\\bsizeof\\b"
				}
			]
		},
		"storage": {
			"patterns": [
				{
					"name": "storage.modifier.v",
					"match": "\\b(const|mut|pub)\\b"
				}
			]
		},
		"number": {
			"patterns": [
				{
					"match": "([-]?)([0-9e]*)([.])+([0-9]+)",
					"captures": {
						"1": {
							"name": "constant.numeric.float.v"
						},
						"2": {
							"name": "constant.numeric.float.v"
						},
						"3": {
							"name": "constant.numeric.float.v"
						},
						"4": {
							"name": "constant.numeric.float.v"
						}
					}
				},
				{
					"match": "(0[xX])([0-9a-fA-F]+)",
					"captures": {
						"1": {
							"name": "constant.numeric.hex.v"
						},
						"2": {
							"name": "constant.numeric.hex.v"
						}
					}
				},
				{
					"match": "\\b([-]?)([0-9]+)",
					"captures": {
						"1": {
							"name": "constant.numeric.integer.v"
						},
						"2": {
							"name": "constant.numeric.integer.v"
						}
					}
				}
			]
		},
		"singlestring": {
			"name": "string.quoted.single.v",
			"begin": "'",
			"end": "'",
			"patterns": [
				{
					"name": "constant.character.escape.v",
					"match": "\\\\."
				}
			]
		},
		"doublestring": {
			"name": "string.quoted.double.v",
			"begin": "\"",
			"end": "\"",
			"patterns": [
				{
					"name": "constant.character.escape.v",
					"match": "\\\\."
				}
			]
		}
	}
}
